<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNA Mechanism</title>
    <style>
 .sidebar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #1a2980;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .sidebar-toggle:hover {
            background-color: rgba(255, 255, 255, 1);
            transform: scale(1.1);
        }

        .sidebar-toggle-icon {
            font-size: 20px;
            color: white;
        }

        /* Sidebar styles */
        .sidebar {
            width: 280px;
            background: white;
            color: #333;
            padding: 30px 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 999;
            left: -280px;
            top: 0;
            transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.05);
            border-right: 1px solid #eee;
        }

        .sidebar.active {
            left: 0;
        }

        /* Submenu styles */
        .sub-links {
            list-style: none;
            padding-left: 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .has-submenu.active .sub-links {
            max-height: 500px;
        }

        .has-submenu {
            position: relative;
        }

        .has-submenu::after {
            content: '▼';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8em;
            transition: transform 0.3s ease;
        }

        .has-submenu.active::after {
            transform: translateY(-50%) rotate(180deg);
        }

        
        /* NAVIGATION LINKS */
        .nav-links {
            list-style: none;
            padding: 0;
        }
        
        .nav-links li {
            margin-bottom: 10px;
        }
        
        .nav-links a {
            color: #555;
            text-decoration: none;
            display: block;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            background: rgba(255,255,255,0.1);
        }

.scene.chemistry-theme {
            width: 100%;
            padding: 2rem;
            background: 
                url('https://www.transparenttextures.com/patterns/hexellence.png') repeat,
                linear-gradient(135deg, #f0f8ff 0%, #e0f7fa 100%);
            background-blend-mode: overlay;
            box-shadow: inset 0 0 0 1000px rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(4px);
            border-top: 6px solid #4db6ac;
            border-bottom: 6px solid #4db6ac;
            box-sizing: border-box;

            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            align-items: center; /* ✅ Center content vertically */
            justify-content: center;
        }

        .scene figure {
            flex: 1 1 300px;
            margin: 0;
            text-align: center;
        }

        .scene img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            display: block;
            margin: 0 auto;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }

        .main-caption {
            text-align: center;
            font-weight: 600;
            font-size: 1.2rem;
            color: #00796b;
            margin-top: 1rem;
        }

        .source-caption {
            text-align: center;
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 1.5rem;
        }

        .description {
            flex: 1 1 400px;
            font-size: 1.05rem;
            color: #333;
            line-height: 1.8;
            background: rgba(255, 255, 255, 0.85);
            padding: 1.5rem 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            justify-content: center; /* ✅ Vertically center text inside box */
            text-align: justify;
        }

  /* Base styles */
  html, body {
            width: 100%;
            height: 100%;
            font-family: 'Arial', sans-serif;
            color: #333;
            line-height: 1.6;
            scroll-behavior: smooth;
            background: #f5f7fa;
            margin: 0;
            padding: 0;
        }

        /* Main content styles */
        .main-content {
            padding: 20px;
            width: 80%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .scene {
            min-height: 50vh;
            padding: 40px 20px;
            margin-bottom: 20px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
        }

        .scene::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(90deg, #1a2980, #26d0ce);
            border-radius: 20px 20px 0 0;
        }

        .scene h2 {
            color: #1a2980;
            border-bottom: 3px solid #26d0ce;
            padding-bottom: 15px;
            margin-top: 0;
            font-size: 2.2rem;
            margin-bottom: 20px;
            position: relative;
        }

        /* Interactive module styles */
        .interactive-module {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .module-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* DNA Visualization Styles */
        .dna-replication-container {
            position: relative;
            height: 600px;
            margin: 20px 0;
            overflow: hidden;
        }

        .dna-replication-container svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* DNA Backbone styles */
        .backbone {
            stroke-width: 4;
            fill: none;
            stroke-linecap: round;
            transition: all 0.5s ease;
        }
        
        .leading-strand {
            stroke: #1a2980;
        }
        
        .lagging-strand {
            stroke: #26d0ce;
        }
        
        /* Base pair styles */
        .base-pair {
            stroke-width: 3;
            transition: all 0.5s ease;
        }
        
        .adenine { stroke: #FF6B6B; }    /* A */
        .thymine { stroke: #FFD166; }    /* T */
        .cytosine { stroke: #06D6A0; }   /* C */
        .guanine { stroke: #118AB2; }     /* G */
        
        /* Enzyme styles */
        .enzyme {
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .helicase {
            fill: #FFA500;
        }
        
        .polymerase {
            fill: #9b59b6;
        }
        
        .primase {
            fill: #e74c3c;
        }
        
        /* New DNA strands */
        .new-strand {
            stroke-width: 3;
            stroke-dasharray: 5,3;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .leading-new {
            stroke: #1a2980;
        }
        
        .lagging-new {
            stroke: #26d0ce;
        }
        
        /* Okazaki fragments */
        .okazaki {
            stroke: #26d0ce;
            stroke-width: 3;
            stroke-dasharray: 5,3;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        /* Direction indicators */
        .direction-arrow {
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        /* Alkylation effects */
        .alkylated {
            stroke: #c0392b;
            stroke-width: 6 !important;
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            0% { stroke-width: 6; opacity: 0.9; }
            100% { stroke-width: 8; opacity: 1; }
        }
        
        /* Replication fork lines */
        .fork-line {
            stroke: #888;
            stroke-width: 2;
            stroke-dasharray: 5,3;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        /* Explanation box */
        .explanation-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #1a2980;
        }
        
        /* Step indicator and controls */
        .step-indicator {
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.2rem;
        }
        
        .step-navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .control-btn {
            padding: 10px 20px;
            background: #1a2980;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .control-btn:hover {
            background: #26d0ce;
            transform: translateY(-2px);
        }
        
        .control-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        /* Header styles */
        .header {
            text-align: center;
            padding: 80px 20px 60px;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            position: relative;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 0 100%);
            margin-bottom: -30px;
        }
        
        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
        }

        /* Footer styles */
        .footer {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            margin-top: 40px;
        }
        
        .footer p {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }



        /* Responsive adjustments */
        @media (max-width: 768px) {
            .main-content {
                width: 95%;
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header p {
                font-size: 1.1rem;
            }
            
            .dna-replication-container {
                height: 400px;
            }
        }
        @media (max-width: 768px) {
            .sidebar {
                width: 250px;
            }
            
            .sidebar-expanded .main-content {
                position: fixed;
                left: 250px;
                width: 100%;
            }
            
            .sidebar-expanded::after {
                content: '';
                position: fixed;
                top: 0;
                left: 250px;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 998;
            }
        }

        .big-arrow {
  width: 100px;
  height: 100px;
  margin: 40px auto;
  position: relative;
  background: linear-gradient(135deg, #4db6ac, #00796b);
  clip-path: polygon(
    50% 0%,   /* tip */
    100% 60%, /* right wing */
    75% 60%,  
    75% 100%, /* right tail */
    25% 100%, /* left tail */
    25% 60%,  
    0% 60%    /* left wing */
  );
  filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2));
  transition: background 0.3s ease;
}

.big-arrow:hover {
  background: linear-gradient(135deg, #81c784, #388e3c);
  cursor: pointer;
}




@keyframes agent-move {
    0% { transform: translate(0,0); }
    100% { transform: translate(40px,80px); }
}

        .animate-step {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
</style>
</head>
<body>
    <div class="sidebar-toggle" id="sidebarToggle">
        <span class="sidebar-toggle-icon">☰</span>
    </div>
    
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul class="nav-links">
            <li><a href="historical.html">Warhead and Wonder drugs</a></li>
            <li><a href="mechanism.html">Clean copies</a></li>
            <li class="has-submenu">
                <a href="agents.html">Alkylating Agents</a>
                <ul class="sub-links">
                  <li><a href="agents.html">Summary</a></li>
                  <li><a href="nitrogen-mustards.html">Nitrogen Mustards</a></li>
                  <li><a href="oxazaphosphorines.html">Oxazaphosphorines</a></li>
                  <li><a href="nitrosoureas.html">Nitrosourea</a></li>
                  <li><a href="mitomycin-c.html">Mitomycin C</a></li>
                </ul>
              </li>

            <li><a href="references.html">References</a></li>
            <li><a href="index.html">Authors</a></li>
        </ul>
    </div>

    <div class="main-content">
        <div class="chemotherapy-animation">
            <div class="header">
                <h1>From Mustard Gas to Chemotherapy</h1>
                <p>The Alchemical Transformation of Chemical Weapons into Life-Saving Medicines</p>
            </div>
            
            <div class="scene chemistry-theme">
                <figure>
                    <img src="https://raider.pressbooks.pub/app/uploads/sites/33/2023/06/image5-1.jpg" alt="Chemical structure of DNA">
                    <figcaption class="main-caption">Chemical Structure of DNA</figcaption>
                    <figcaption class="source-caption">
                        <i>Credit to Raider Digital Publishing. (n.d.). Introductory Biology I [Image]. Raider Pressbooks.</i>
                    </figcaption>
                </figure>
                <p class="description">
                    The helicase binds tightly to one DNA strand, and as it translocates forward, it pulls that strand.
                    This causes the complementary strand to be physically pushed away as base pairing is disrupted.
                    The separation destabilizes the nucleotide base pairs, causing them to preferentially separate.
                </p>
            </div>

            <div class="scene chemistry-theme">
                <figure>
                    <img src="atp.png" alt="ATP">
                    <figcaption class="main-caption">Structure of ATP</figcaption>
                    <figcaption class="source-caption">
                        <i>Idk where the pic come from </i>
                    </figcaption>

                    <div class="big-arrow" style = "transform: rotate(180deg);"></div>

                    <img src="adp.png" alt="ADP">

                </figure>
            </div>
            
            <div class="scene chemistry-theme">
                <figure>
                    <img src="https://socialsci.libretexts.org/@api/deki/files/128770/image7-7.jpg?revision=1" alt="DNA replication process">
                    <figcaption class="main-caption">Process of DNA replication</figcaption>
                    <figcaption class="source-caption">
                        <i>Credit to LibreTexts. (n.d.). Social Science LibreTexts.</i>
                    </figcaption>
                </figure>
            </div>

            <div class="scene chemistry-theme">
                <figure>
                    <img src="https://raider.pressbooks.pub/app/uploads/sites/33/2023/06/image5-1.jpg" alt="Chemical structure of DNA">
                    <figcaption class="main-caption">Chemical Structure of DNA</figcaption>
                    <figcaption class="source-caption">
                        <i>Credit to Raider Digital Publishing. (n.d.). Introductory Biology I [Image]. Raider Pressbooks.</i>
                    </figcaption>
                </figure>
                <p class="description">
                    The helicase binds tightly to one DNA strand, and as it translocates forward, it pulls that strand.
                    This causes the complementary strand to be physically pushed away as base pairing is disrupted.
                    The separation destabilizes the nucleotide base pairs, causing them to preferentially separate.
                </p>
            </div>
            
            <div class="scene chemistry-theme">
                <figure>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/8/8d/Crosslinking.jpg" alt="Cross Linkage">
                    <figcaption class="main-caption">Cross Linkage</figcaption>
                    <figcaption class="source-caption">
                        <i>Credit to Ribbit~commonswiki. (2006). Crosslinking [Image]. Wikimedia Commons.</i>
                    </figcaption>
                </figure>
                <p class="description">
                    For Interstrand Cross Linkage, the helicase is unable to unwind the two strands as they form a strong σ-bond instead of hydrogen bonds between the nucleotide base pairs
                    For Intrastrand Cross Linkage, the α-Polymerase or the fragments are unable to make a complete copy of the lagging or leading strand respectively

                </p>
            </div>



    

            <!-- DNA Alkylation Process -->
            <div class="interactive-module">
                <div class="module-content">
                    <div class="step-indicator" id="stepIndicator">Step 1: Normal DNA Structure</div>
                    <div class="dna-replication-container">
                        <svg viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">
                            <!-- Horizontal DNA Backbone -->
                            <path id="leading-backbone" class="backbone leading-strand" 
                                  d="M50,80 Q80,60 110,80 Q140,100 170,80 Q200,60 230,80 Q260,100 290,80 Q320,60 350,80 Q380,100 410,80 Q440,60 470,80 Q500,100 530,80 Q560,60 590,80 Q620,100 650,80 Q680,60 710,80 Q740,100 770,80"/>
                            
                            <path id="lagging-backbone" class="backbone lagging-strand" 
                                  d="M50,120 Q80,140 110,120 Q140,100 170,120 Q200,140 230,120 Q260,100 290,120 Q320,140 350,120 Q380,100 410,120 Q440,140 470,120 Q500,100 530,120 Q560,140 590,120 Q620,100 650,120 Q680,140 710,120 Q740,100 770,120"/>
                            
                            <!-- Base pairs (20 total for 2 complete twists) -->
                            <g id="base-pairs">
                                <!-- First 10 base pairs (first twist) -->
                                <line x1="50" y1="80" x2="50" y2="120" class="base-pair adenine" />
                                <line x1="80" y1="60" x2="80" y2="140" class="base-pair thymine" />
                                <line x1="110" y1="80" x2="110" y2="120" class="base-pair cytosine" />
                                <line x1="140" y1="100" x2="140" y2="100" class="base-pair guanine" />
                                <line x1="170" y1="80" x2="170" y2="120" class="base-pair adenine" />
                                <line x1="200" y1="60" x2="200" y2="140" class="base-pair thymine" />
                                <line x1="230" y1="80" x2="230" y2="120" class="base-pair guanine" />
                                <line x1="260" y1="100" x2="260" y2="100" class="base-pair cytosine" />
                                <line x1="290" y1="80" x2="290" y2="120" class="base-pair thymine" />
                                <line x1="320" y1="60" x2="320" y2="140" class="base-pair adenine" />
                                
                                <!-- Second 10 base pairs (second twist) -->
                                <line x1="350" y1="80" x2="350" y2="120" class="base-pair cytosine" />
                                <line x1="380" y1="100" x2="380" y2="100" class="base-pair guanine" />
                                <line x1="410" y1="80" x2="410" y2="120" class="base-pair adenine" />
                                <line x1="440" y1="60" x2="440" y2="140" class="base-pair thymine" />
                                <line x1="470" y1="80" x2="470" y2="120" class="base-pair guanine" />
                                <line x1="500" y1="100" x2="500" y2="100" class="base-pair cytosine" />
                                <line x1="530" y1="80" x2="530" y2="120" class="base-pair thymine" />
                                <line x1="560" y1="60" x2="560" y2="140" class="base-pair adenine" />
                                <line x1="590" y1="80" x2="590" y2="120" class="base-pair cytosine" />
                                <line x1="620" y1="100" x2="620" y2="100" class="base-pair guanine" />
                            </g>
                            
                            <!-- Replication fork elements (initially hidden) -->
                            <path id="unwound-leading" d="M770,80 L810,60 L820,40" class="backbone leading-strand" opacity="0" />
                            <path id="unwound-lagging" d="M770,120 L810,140 L820,160" class="backbone lagging-strand" opacity="0" />
                            
                            <!-- Enzymes (initially hidden) -->
                            <g id="helicase" class="enzyme" transform="translate(740,100)" opacity="0">
                                <circle r="15" class="helicase" />
                                <text x="0" y="5" text-anchor="middle" font-size="10" fill="white">Helicase</text>
                            </g>
                            
                            <g id="primase" class="enzyme" transform="translate(810,140)" opacity="0">
                                <rect x="-20" y="-10" width="40" height="20" class="primase" rx="5" />
                                <text x="0" y="5" text-anchor="middle" font-size="10" fill="white">Primase</text>
                            </g>
                            
                            <g id="polymerase-leading" class="enzyme" transform="translate(810,60)" opacity="0">
                                <rect x="-20" y="-10" width="40" height="20" class="polymerase" rx="5" />
                                <text x="0" y="5" text-anchor="middle" font-size="10" fill="white">Pol III</text>
                            </g>
                            
                            <g id="polymerase-lagging" class="enzyme" transform="translate(820,160)" opacity="0">
                                <rect x="-20" y="-10" width="40" height="20" class="polymerase" rx="5" />
                                <text x="0" y="5" text-anchor="middle" font-size="10" fill="white">Pol III</text>
                            </g>
                            
                            <!-- New DNA strands -->
                            <path id="new-strand-leading" d="M810,60 Q830,40 850,60" class="new-strand leading-new" opacity="0" />
                            <path id="new-strand-lagging" d="M810,140 Q830,160 850,140" class="new-strand lagging-new" opacity="0" />
                            
                            <!-- Okazaki fragments -->
                            <path id="okazaki1" d="M850,140 L870,120 L880,100" class="okazaki" opacity="0" />
                            <path id="okazaki2" d="M880,100 L860,80 L840,90" class="okazaki" opacity="0" />
                            
                            <!-- Direction arrows -->
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                                </marker>
                            </defs>
                            
                            <line id="leading-arrow" x1="830" y1="40" x2="850" y2="40" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" opacity="0" />
                            <line id="lagging-arrow" x1="830" y1="160" x2="850" y2="160" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" opacity="0" />
                            
                            <!-- Strand labels -->
                            <text x="40" y="70" font-size="12" fill="#1a2980">3'</text>
                            <text x="40" y="130" font-size="12" fill="#26d0ce">5'</text>
                            <text x="760" y="70" font-size="12" fill="#1a2980">5'</text>
                            <text x="760" y="130" font-size="12" fill="#26d0ce">3'</text>
                        </svg>
                    </div>
                    
                    <!-- Explanation box -->
                    <div class="explanation-box" id="replicationExplanation">
                        <h4>Normal DNA Structure</h4>
                        <p>The DNA double helix consists of two antiparallel strands with complementary base pairing (A-T and C-G). The helix makes a complete turn every 10 base pairs, with 2 full twists shown here (20 base pairs). The 5' to 3' orientation of each strand is indicated by the labels.</p>
                    </div>
                    
                    <div class="step-navigation">
                        <button class="control-btn" id="prev-step">Previous</button>
                        <button class="control-btn" id="next-step">Next</button>
                        <button class="control-btn" id="reset-replication">Reset</button>
                    </div>
                </div>
            </div>
        
             
    <div class="footer">
        <p>From Chemical Warfare to Cancer Cure: The Alchemical Evolution of Chemotherapy</p>
    </div>

    <script>

            // Replication Process Variables
            const stepIndicator = document.getElementById('stepIndicator');
        const explanationBox = document.getElementById('replicationExplanation');
        let currentStep = 1;
        const replicationSteps = 5;
        
        // Detailed explanations for each step
        const replicationExplanations = [
            {
                title: "Normal DNA Structure",
                content: "The DNA double helix consists of two antiparallel strands with complementary base pairing (A-T and C-G). The helix makes a complete turn every 10 base pairs, with 2 full twists shown here (20 base pairs). The 5' to 3' orientation of each strand is indicated by the labels."
            },
            {
                title: "Replication Fork Formation",
                content: "DNA replication begins at specific origins where the DNA unwinds, forming a Y-shaped replication fork. The helicase enzyme will bind here to separate the strands. The fork is visible where the strands begin to separate, with one strand oriented 5'→3' (leading strand) and the other 3'→5' (lagging strand)."
            },
            {
                title: "Helicase Unwinds DNA",
                content: "The helicase enzyme moves along the DNA, breaking hydrogen bonds between base pairs to separate the strands. This creates single-stranded templates for replication. The unwinding creates positive supercoils ahead of the fork that are resolved by topoisomerases (not shown)."
            },
            {
                title: "Primase Adds RNA Primers",
                content: "Primase synthesizes short RNA primers on both strands. On the lagging strand, primers are needed for each Okazaki fragment. On the leading strand, only one primer is required at the origin. These primers provide a 3'-OH group for DNA polymerase to begin synthesis."
            },
            {
                title: "DNA Polymerase Synthesizes New Strands",
                content: "DNA polymerase III extends the primers, adding nucleotides to the 3' end. On the leading strand, synthesis is continuous. On the lagging strand, synthesis occurs in short Okazaki fragments. The proofreading exonuclease activity ensures high fidelity."
            }
        ];

        // Update visualization based on current step
        function updateReplicationVisualization() {
            // First reset all elements to initial state
            resetVisualization();
            
            // Then apply changes for current step with animation
            setTimeout(() => {
                applyStepChanges();
                updateExplanation();
                updateButtonStates();
            }, 50);
        }

        function resetVisualization() {
            // Reset all elements
            const elementsToReset = [
                'unwound-leading', 'unwound-lagging', 'helicase', 'primase',
                'polymerase-leading', 'polymerase-lagging', 'new-strand-leading', 
                'new-strand-lagging', 'okazaki1', 'okazaki2', 'leading-arrow', 
                'lagging-arrow'
            ];
            
            elementsToReset.forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    el.style.opacity = '0';
                    el.classList.remove('animate-step');
                }
            });
            
            // Reset backbone paths
            document.getElementById('leading-backbone').setAttribute('d', 
                'M50,80 Q80,60 110,80 Q140,100 170,80 Q200,60 230,80 Q260,100 290,80 Q320,60 350,80 Q380,100 410,80 Q440,60 470,80 Q500,100 530,80 Q560,60 590,80 Q620,100 650,80 Q680,60 710,80 Q740,100 770,80');
            document.getElementById('lagging-backbone').setAttribute('d', 
                'M50,120 Q80,140 110,120 Q140,100 170,120 Q200,140 230,120 Q260,100 290,120 Q320,140 350,120 Q380,100 410,120 Q440,140 470,120 Q500,100 530,120 Q560,140 590,120 Q620,100 650,120 Q680,140 710,120 Q740,100 770,120');
        }

        function applyStepChanges() {
            stepIndicator.textContent = `Step ${currentStep}: ${replicationExplanations[currentStep-1].title}`;
            
            // Apply changes based on current step
            switch (currentStep) {
                case 1:
                    // Normal DNA structure - already reset
                    break;
                case 2:
                    // Show replication fork formation
                    animateElements(['unwound-leading', 'unwound-lagging']);
                    break;
                case 3:
                    // Show helicase unwinding
                    animateElements(['helicase', 'unwound-leading', 'unwound-lagging']);
                    break;
                case 4:
                    // Show primase adding primers
                    animateElements(['helicase', 'primase', 'unwound-leading', 'unwound-lagging']);
                    break;
                case 5:
                    // Show complete replication with all enzymes
                    animateElements([
                        'helicase', 'primase', 'polymerase-leading', 'polymerase-lagging',
                        'new-strand-leading', 'new-strand-lagging', 'okazaki1', 'okazaki2',
                        'leading-arrow', 'lagging-arrow'
                    ]);
                    break;
            }
        }

        function animateElements(ids) {
            ids.forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    el.style.opacity = '1';
                    el.classList.add('animate-step');
                }
            });
        }

        function updateExplanation() {
            const explanation = replicationExplanations[currentStep - 1];
            explanationBox.innerHTML = `<h4>${explanation.title}</h4><p>${explanation.content}</p>`;
            explanationBox.classList.add('animate-step');
            setTimeout(() => explanationBox.classList.remove('animate-step'), 800);
        }

        function updateButtonStates() {
            document.getElementById('prev-step').disabled = currentStep === 1;
            document.getElementById('next-step').disabled = currentStep === replicationSteps;
        }

        // Navigation controls
        document.getElementById('prev-step').addEventListener('click', () => {
            if (currentStep > 1) {
                currentStep--;
                updateReplicationVisualization();
            }
        });

        document.getElementById('next-step').addEventListener('click', () => {
            if (currentStep < replicationSteps) {
                currentStep++;
                updateReplicationVisualization();
            }
        });

        document.getElementById('reset-replication').addEventListener('click', () => {
            currentStep = 1;
            updateReplicationVisualization();
        });

        // Initialize
        updateReplicationVisualization();


    
        document.addEventListener('DOMContentLoaded', () => {
    const sidebar = document.querySelector(".sidebar");
    const sidebarToggle = document.querySelector('.sidebar-toggle');
    const navLinks = document.querySelectorAll(".nav-links > li > a"); // Target direct links within list items
    const hasSubmenuItems = document.querySelectorAll('.has-submenu');
    const subLinks = document.querySelectorAll('.sub-links a');

    // Sidebar toggle logic
    if (sidebarToggle && sidebar) {
        sidebarToggle.addEventListener('click', function () {
            sidebar.classList.toggle('active');
            localStorage.setItem('sidebarExpanded', sidebar.classList.contains('active'));
        });

        // Restore state
        if (localStorage.getItem('sidebarExpanded') === 'true') {
            sidebar.classList.add('active');
        }
    }

    // Submenu toggle
    hasSubmenuItems.forEach(item => {
        const link = item.querySelector('a');
        if (link) {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                item.classList.toggle('active');
            });
        }
    });

    // Close sidebar when a submenu link is clicked
    subLinks.forEach(subLink => {
        subLink.addEventListener('click', () => {
            sidebar.classList.remove("active");
            localStorage.setItem('sidebarExpanded', 'false');
        });
    });

    // Close sidebar when a top-level (non-submenu) link is clicked
    navLinks.forEach(link => {
        link.addEventListener("click", () => {
            if (!link.parentElement.classList.contains('has-submenu')) { // Check the parent LI
                sidebar.classList.remove("active");
                localStorage.setItem('sidebarExpanded', 'false');
            }
        });
    });
});

    function scrollToSection(sectionId) {
    const section = document.getElementById(sectionId);
    if (section) {
        // Calculate offset considering fixed header if needed
        const offset = 100; // Adjust this value based on your header height
        const targetPosition = section.getBoundingClientRect().top + window.pageYOffset - offset;
        
        window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
        });
        
        // Update URL without jumping
        history.pushState(null, null, `#${sectionId}`);
    }
}
    </script>
</body>
</html>

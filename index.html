<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From Mustard Gas to Chemotherapy</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        /* Reset some Wix styles that might interfere */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow-x: hidden;
        }
        
        /* Main container */
        .chemotherapy-animation {
            width: 100%;
            margin: 0 auto;
            font-family: 'Arial', sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
        }
        
        .team-members {
            max-width: 800px;
            margin: 0 auto 30px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .scene {
            min-height: 600px;
            padding: 30px 20px;
            margin-bottom: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
            position: relative;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }
        
        h2 {
            color: #1a2980;
            border-bottom: 2px solid #26d0ce;
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        /* WW1 Battlefield */
        .battlefield {
            width: 100%;
            height: 300px;
            background: linear-gradient(to bottom, #8e9eab, #eef2f3);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .soldier {
            position: absolute;
            width: 30px;
            height: 50px;
            background: #5d4037;
            bottom: 0;
            left: 20%;
            z-index: 2;
            transition: all 0.3s ease;
        }
        
        .soldier::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: #5d4037;
            top: -10px;
            left: 5px;
            border-radius: 50%;
        }
        
        .soldier::after {
            content: '';
            position: absolute;
            width: 15px;
            height: 20px;
            background: #3e2723;
            top: -8px;
            left: 8px;
            border-radius: 50% 50% 0 0;
        }
        
        .gas-cloud {
            position: absolute;
            width: 80px;
            height: 60px;
            background: rgba(106, 168, 79, 0.7);
            border-radius: 50%;
            top: 40%;
            left: 60%;
            filter: blur(10px);
            opacity: 0;
            transform: scale(0.5);
        }
        
        .trench {
            position: absolute;
            width: 100%;
            height: 20px;
            background: #795548;
            bottom: 0;
        }
        
        .trench::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 15px;
            background: #5d4037;
            bottom: 20px;
            left: 0;
        }
        
        /* Laboratory Scene */
        .lab {
            width: 100%;
            height: 300px;
            background: #f9f9f9;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
            background-image: linear-gradient(to bottom, #f9f9f9 0%, #e0e0e0 100%);
        }
        
        .lab-table {
            position: absolute;
            width: 100%;
            height: 60px;
            background: #8d6e63;
            bottom: 0;
            border-radius: 0 0 10px 10px;
        }
        
        .flask {
            position: absolute;
            width: 60px;
            height: 90px;
            background: rgba(200, 230, 255, 0.8);
            border-radius: 20px 20px 0 0;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            border: 2px solid #90caf9;
            opacity: 0;
            z-index: 2;
        }
        
        .flask::before {
            content: '';
            position: absolute;
            width: 8px;
            height: 15px;
            background: #90caf9;
            top: -15px;
            left: 26px;
            border-radius: 5px 5px 0 0;
        }
        
        .flask-liquid {
            position: absolute;
            width: 50px;
            height: 40px;
            background: rgba(106, 168, 79, 0.5);
            bottom: 0;
            left: 5px;
            border-radius: 0 0 20px 20px;
            transform-origin: bottom center;
        }
        
        .flask-bubbles {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .bubble {
            position: absolute;
            width: 6px;
            height: 6px;
            background: rgba(255,255,255,0.7);
            border-radius: 50%;
            bottom: 10px;
            opacity: 0;
        }
        
        .microscope {
            position: absolute;
            width: 60px;
            height: 45px;
            background: #e0e0e0;
            bottom: 60px;
            left: 30%;
            border-radius: 6px;
            opacity: 0;
            z-index: 2;
        }
        
        .microscope::before {
            content: '';
            position: absolute;
            width: 30px;
            height: 45px;
            background: #b0bec5;
            border-radius: 15px;
            top: -30px;
            left: 15px;
        }
        
        .microscope::after {
            content: '';
            position: absolute;
            width: 8px;
            height: 20px;
            background: #78909c;
            top: -50px;
            left: 26px;
        }
        
        .lab-equipment {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #cfd8dc;
            bottom: 60px;
            right: 20%;
            border-radius: 5px;
            opacity: 0;
        }
        
        /* DNA Animation */
        .dna-animation {
            width: 100%;
            height: 350px;
            position: relative;
            margin: 20px 0;
            background: #f5f5f5;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .dna-strand {
            position: absolute;
            width: 150px;
            height: 300px;
            left: 50%;
            top: 30px;
            transform: translateX(-50%);
        }
        
        .dna-backbone {
            position: absolute;
            width: 3px;
            height: 250px;
            background: #333;
            left: 20px;
            top: 20px;
        }
        
        .dna-backbone:nth-child(2) {
            left: 130px;
        }
        
        .dna-base {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            opacity: 0;
            transform: scale(0);
            z-index: 2;
        }
        
        .dna-connector {
            position: absolute;
            width: 2px;
            height: 70px;
            background: #333;
            left: 75px;
            top: 40px;
            transform-origin: top center;
            opacity: 0;
        }
        
        .crosslink {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #ff5252;
            border-radius: 50%;
            opacity: 0;
            z-index: 3;
        }
        
        .aziridinium {
            position: absolute;
            width: 25px;
            height: 25px;
            background: #ac92ec;
            border-radius: 50%;
            opacity: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
            z-index: 3;
        }
        
        /* Drug Types */
        .drug-types {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .drug-card {
            width: 150px;
            height: 150px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
        
        .drug-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .drug-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #26d0ce, #1a2980);
            border-radius: 50%;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 20px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        
        .drug-card h4 {
            margin: 5px 0;
            color: #1a2980;
            text-align: center;
            font-size: 16px;
        }
        
        .drug-card p {
            margin: 0;
            font-size: 12px;
            color: #666;
            text-align: center;
        }
        
        /* Treatment Scene */
        .treatment-scene {
            width: 100%;
            height: 300px;
            background: #e8f5e9;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
            background-image: linear-gradient(to bottom, #e8f5e9 0%, #c8e6c9 100%);
        }
        
        .hospital-bed {
            position: absolute;
            width: 150px;
            height: 25px;
            background: #bcaaa4;
            bottom: 0;
            left: 30%;
            border-radius: 5px 5px 0 0;
        }
        
        .hospital-bed::before {
            content: '';
            position: absolute;
            width: 170px;
            height: 8px;
            background: #a1887f;
            bottom: 25px;
            left: -10px;
        }
        
        .patient {
            position: absolute;
            width: 60px;
            height: 120px;
            background: #b39ddb;
            bottom: 30px;
            left: 35%;
            border-radius: 30px 30px 0 0;
            opacity: 0;
            z-index: 2;
        }
        
        .patient::before {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            background: #b39ddb;
            top: -15px;
            left: 15px;
            border-radius: 50%;
        }
        
        .patient::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            background: #f8bbd0;
            top: -12px;
            left: 18px;
            border-radius: 50%;
        }
        
        .iv-bag {
            position: absolute;
            width: 50px;
            height: 80px;
            background: #80deea;
            top: 40px;
            right: 30%;
            border-radius: 8px;
            opacity: 0;
            z-index: 2;
        }
        
        .iv-bag::before {
            content: '';
            position: absolute;
            width: 30px;
            height: 15px;
            background: #4dd0e1;
            top: -8px;
            left: 10px;
            border-radius: 5px;
        }
        
        .iv-tube {
            position: absolute;
            width: 5px;
            height: 100px;
            background: #4dd0e1;
            top: 120px;
            right: 35%;
            transform-origin: top center;
            opacity: 0;
            z-index: 1;
        }
        
        .iv-tube::before {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: #4dd0e1;
            bottom: 0;
            left: -1px;
            border-radius: 50%;
        }
        
        .cancer-cell {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #f44336;
            border-radius: 50%;
            opacity: 0;
            filter: drop-shadow(0 0 3px rgba(244, 67, 54, 0.7));
        }
        
        .cancer-cell::before, .cancer-cell::after {
            content: '';
            position: absolute;
            width: 15px;
            height: 15px;
            background: #e53935;
            border-radius: 50%;
        }
        
        .cancer-cell::before {
            top: -8px;
            left: -8px;
        }
        
        .cancer-cell::after {
            bottom: -8px;
            right: -8px;
        }
        
        .footer {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
        }
        
        .footer p {
            font-size: 16px;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        /* Chemical structures */
        .chemical-structure {
            width: 100%;
            height: 120px;
            position: relative;
            margin: 15px 0;
        }
        
        .atom {
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
            opacity: 0;
        }
        
        .bond {
            position: absolute;
            height: 3px;
            background: #333;
            transform-origin: left center;
            opacity: 0;
        }
        
        /* Tooltip for chemical elements */
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }
        
        /* Progress indicator */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.1);
            z-index: 100;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #26d0ce, #1a2980);
            width: 0%;
            transition: width 0.1s ease;
        }
    </style>
</head>
<body>
    <div class="chemotherapy-animation">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="header">
            <h1>From Mustard Gas to Chemotherapy</h1>
            <p>The Alchemical Transformation of Chemical Weapons into Life-Saving Medicines</p>
        </div>
        
        <div class="team-members">
            <h3>Team Members:</h3>
            <p>Toh Kai Xuen, 4D | Tan Jie, 4D | Jocelyn Lau Yu Xuan, 4D</p>
        </div>
        
        <!-- WW1 Scene -->
        <div class="scene" id="ww1">
            <h2>1917: Chemical Warfare Beginnings</h2>
            <div class="battlefield">
                <div class="trench"></div>
                <div class="soldier"></div>
                <div class="gas-cloud"></div>
                <div class="soldier" style="left: 40%; transform: scaleX(-1);"></div>
                <div class="soldier" style="left: 70%;"></div>
            </div>
            <div class="chemical-structure">
                <div class="atom" style="background: #4CAF50; left: 40px; top: 50px;">S</div>
                <div class="atom" style="background: #2196F3; left: 100px; top: 50px;">C</div>
                <div class="atom" style="background: #2196F3; left: 160px; top: 50px;">C</div>
                <div class="atom" style="background: #2196F3; left: 220px; top: 50px;">C</div>
                <div class="atom" style="background: #2196F3; left: 280px; top: 50px;">C</div>
                <div class="atom" style="background: #FF9800; left: 70px; top: 25px;">Cl</div>
                <div class="atom" style="background: #FF9800; left: 70px; top: 75px;">Cl</div>
                <div class="atom" style="background: #FF9800; left: 190px; top: 25px;">Cl</div>
                <div class="atom" style="background: #FF9800; left: 190px; top: 75px;">Cl</div>
                
                <div class="bond" style="width: 60px; left: 55px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 60px; left: 115px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 60px; left: 175px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 25px; left: 65px; top: 40px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 25px; left: 65px; top: 90px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 25px; left: 185px; top: 40px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 25px; left: 185px; top: 90px; transform: rotate(90deg);"></div>
            </div>
            <p>Mustard gas (C₄H₈Cl₂S) was first weaponized in WWI by German forces. Autopsies revealed it destroyed white blood cells, sparking medical interest in its potential to treat hematologic cancers characterized by abnormal WBC proliferation.</p>
        </div>
        
        <!-- 1930s Research -->
        <div class="scene" id="research">
            <h2>1930s: Nitrogen Mustard Discovery</h2>
            <div class="lab">
                <div class="lab-table"></div>
                <div class="flask">
                    <div class="flask-liquid"></div>
                    <div class="flask-bubbles">
                        <div class="bubble" style="left: 15px;"></div>
                        <div class="bubble" style="left: 30px; width: 5px; height: 5px;"></div>
                        <div class="bubble" style="left: 45px;"></div>
                    </div>
                </div>
                <div class="microscope"></div>
                <div class="lab-equipment"></div>
            </div>
            <div class="chemical-structure">
                <div class="atom" style="background: #9C27B0; left: 40px; top: 50px;">N</div>
                <div class="atom" style="background: #2196F3; left: 100px; top: 50px;">C</div>
                <div class="atom" style="background: #2196F3; left: 160px; top: 50px;">C</div>
                <div class="atom" style="background: #2196F3; left: 220px; top: 50px;">C</div>
                <div class="atom" style="background: #2196F3; left: 280px; top: 50px;">C</div>
                <div class="atom" style="background: #FF9800; left: 70px; top: 25px;">Cl</div>
                <div class="atom" style="background: #FF9800; left: 70px; top: 75px;">Cl</div>
                <div class="atom" style="background: #FF9800; left: 190px; top: 25px;">Cl</div>
                <div class="atom" style="background: #FF9800; left: 190px; top: 75px;">Cl</div>
                
                <div class="bond" style="width: 60px; left: 55px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 60px; left: 115px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 60px; left: 175px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 25px; left: 65px; top: 40px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 25px; left: 65px; top: 90px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 25px; left: 185px; top: 40px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 25px; left: 185px; top: 90px; transform: rotate(90deg);"></div>
            </div>
            <p>Scientists modified sulfur mustard into nitrogen mustards (C₆H₁₂Cl₃N), finding greater systemic toxicity against proliferating cells (lymphoid tissue, bone marrow, GI tract). Yale researchers successfully treated tumor-ridden mice, leading to the first human chemotherapy trials.</p>
        </div>
        
        <!-- Mechanism of Action -->
        <div class="scene" id="mechanism">
            <h2>Alkylation Mechanism</h2>
            <div class="dna-animation">
                <div class="dna-strand">
                    <div class="dna-backbone"></div>
                    <div class="dna-backbone"></div>
                    
                    <!-- DNA bases -->
                    <div class="dna-base" style="background: #4CAF50; top: 20px; left: 60px;">G</div>
                    <div class="dna-connector" style="transform: rotate(-30deg); top: 40px; left: 75px;"></div>
                    <div class="dna-base" style="background: #2196F3; top: 70px; left: 20px;">C</div>
                    
                    <div class="dna-base" style="background: #FF9800; top: 120px; left: 60px;">A</div>
                    <div class="dna-connector" style="transform: rotate(30deg); top: 140px; left: 75px;"></div>
                    <div class="dna-base" style="background: #9C27B0; top: 170px; left: 20px;">T</div>
                    
                    <div class="dna-base" style="background: #4CAF50; top: 220px; left: 60px;">G</div>
                    <div class="dna-connector" style="transform: rotate(-20deg); top: 240px; left: 75px;"></div>
                    <div class="dna-base" style="background: #2196F3; top: 270px; left: 20px;">C</div>
                    
                    <!-- Aziridinium ion -->
                    <div class="aziridinium" style="top: -15px; left: 60px;">A+</div>
                    <div class="crosslink" style="top: 30px; left: 65px;"></div>
                    <div class="crosslink" style="top: 230px; left: 65px;"></div>
                </div>
            </div>
            <div class="chemical-structure">
                <div class="atom" style="background: #9C27B0; left: 80px; top: 50px;">N</div>
                <div class="atom" style="background: #2196F3; left: 140px; top: 50px;">C</div>
                <div class="atom" style="background: #2196F3; left: 200px; top: 50px;">C</div>
                <div class="atom" style="background: #FF9800; left: 120px; top: 25px;">Cl</div>
                
                <div class="bond" style="width: 60px; left: 95px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 25px; left: 110px; top: 40px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 60px; left: 155px; top: 65px; transform: rotate(0deg);"></div>
                
                <!-- Aziridinium ring -->
                <div class="atom" style="background: #9C27B0; left: 260px; top: 50px;">N+</div>
                <div class="atom" style="background: #2196F3; left: 290px; top: 25px;">C</div>
                <div class="atom" style="background: #2196F3; left: 290px; top: 75px;">C</div>
                
                <div class="bond" style="width: 30px; left: 275px; top: 40px; transform: rotate(45deg);"></div>
                <div class="bond" style="width: 30px; left: 275px; top: 65px; transform: rotate(-45deg);"></div>
                <div class="bond" style="width: 30px; left: 285px; top: 40px; transform: rotate(-45deg);"></div>
                <div class="bond" style="width: 30px; left: 285px; top: 65px; transform: rotate(45deg);"></div>
            </div>
            <p>Nitrogen mustards form reactive aziridinium ions that alkylate DNA at guanine's N7 position (sp² nitrogen with lone pair). This creates interstrand cross-links (N7-G:N7-G) preventing helicase unzipping during replication, or intrastrand links causing DNA helix deformation - both leading to apoptosis.</p>
        </div>
        
        <!-- Modern Drugs -->
        <div class="scene" id="drugs">
            <h2>Modern Chemotherapy Agents</h2>
            <div class="drug-types">
                <div class="drug-card" id="cyclophosphamide">
                    <div class="drug-icon">C</div>
                    <h4>Cyclophosphamide</h4>
                    <p>Lymphomas, Leukemia</p>
                </div>
                <div class="drug-card" id="nitrosoureas">
                    <div class="drug-icon">N</div>
                    <h4>Nitrosoureas</h4>
                    <p>Brain tumors</p>
                </div>
                <div class="drug-card" id="alkyl-sulfonates">
                    <div class="drug-icon">A</div>
                    <h4>Alkyl Sulfonates</h4>
                    <p>Various cancers</p>
                </div>
                <div class="drug-card" id="oxazaphosphorines">
                    <div class="drug-icon">O</div>
                    <h4>Oxazaphosphorines</h4>
                    <p>Sarcoma</p>
                </div>
            </div>
            <div class="chemical-structure">
                <!-- Cyclophosphamide structure -->
                <div class="atom" style="background: #9C27B0; left: 40px; top: 50px;">N</div>
                <div class="atom" style="background: #2196F3; left: 100px; top: 50px;">C</div>
                <div class="atom" style="background: #2196F3; left: 160px; top: 50px;">C</div>
                <div class="atom" style="background: #4CAF50; left: 220px; top: 50px;">O</div>
                <div class="atom" style="background: #4CAF50; left: 280px; top: 50px;">O</div>
                <div class="atom" style="background: #FF9800; left: 70px; top: 25px;">Cl</div>
                <div class="atom" style="background: #FF9800; left: 70px; top: 75px;">Cl</div>
                <div class="atom" style="background: #2196F3; left: 100px; top: 100px;">C</div>
                <div class="atom" style="background: #2196F3; left: 160px; top: 100px;">C</div>
                
                <div class="bond" style="width: 60px; left: 55px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 60px; left: 115px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 60px; left: 175px; top: 65px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 25px; left: 65px; top: 40px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 25px; left: 65px; top: 90px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 60px; left: 115px; top: 115px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 60px; left: 175px; top: 115px; transform: rotate(0deg);"></div>
                <div class="bond" style="width: 25px; left: 200px; top: 40px; transform: rotate(90deg);"></div>
                <div class="bond" style="width: 25px; left: 250px; top: 40px; transform: rotate(90deg);"></div>
            </div>
            <p>Modern agents build on alkylation principles: Cyclophosphamide (lymphomas), Nitrosoureas (lipophilic for brain tumors), Alkyl sulfonates (bis-alkylation), and Oxazaphosphorines (prodrugs activated by P450). Each targets DNA with modified specificity and reduced toxicity.</p>
        </div>
        
        <!-- Treatment Today -->
        <div class="scene" id="treatment">
            <h2>Modern Cancer Treatment</h2>
            <div class="treatment-scene">
                <div class="hospital-bed"></div>
                <div class="patient"></div>
                <div class="iv-bag"></div>
                <div class="iv-tube"></div>
                
                <!-- Cancer cells that will be destroyed -->
                <div class="cancer-cell" style="top: 80px; left: 80px;"></div>
                <div class="cancer-cell" style="top: 120px; left: 160px;"></div>
                <div class="cancer-cell" style="top: 60px; left: 240px;"></div>
                <div class="cancer-cell" style="top: 160px; left: 120px;"></div>
                <div class="cancer-cell" style="top: 100px; left: 200px;"></div>
            </div>
            <p>Today these compounds treat various cancers: Mitomycin C (adenocarcinomas), Dacarbazine (melanomas), Temozolomide (glioblastomas). Their development showcases science's impartiality - transforming poisons into medicines through chemical innovation.</p>
        </div>
        
        <div class="footer">
            <p>From Chemical Warfare to Cancer Cure: The Alchemical Evolution of Chemotherapy</p>
        </div>
    </div>

    <script>
        // Initialize GSAP and ScrollTrigger
        gsap.registerPlugin(ScrollTrigger);
        
        // Wix-specific adjustments
        function setupForWix() {
            // Try to find Wix's scrolling container
            let scroller;
            
            try {
                // For Wix Editor/Studio
                scroller = window.parent.document.querySelector("#site-container") || window;
            } catch(e) {
                // Fallback for standalone or if cross-origin issues
                scroller = window;
            }
            
            // Set up ScrollTrigger with the detected scroller
            ScrollTrigger.defaults({
                scroller: scroller,
                markers: false // Disable debug markers
            });
            
            // Update ScrollTrigger when Wix resizes the iframe
            const resizeObserver = new ResizeObserver(() => {
                ScrollTrigger.refresh();
            });
            
            resizeObserver.observe(document.body);
            
            return scroller;
        }
        
        // Set up all animations
        function setupAnimations(scroller) {
            // Progress bar animation
            gsap.to("#progressBar", {
                scrollTrigger: {
                    trigger: ".chemotherapy-animation",
                    start: "top top",
                    end: "bottom bottom",
                    scrub: true,
                    scroller: scroller
                },
                width: "100%"
            });
            
            // Battlefield Animation
            const soldiers = gsap.utils.toArray(".soldier");
            
            gsap.to(".gas-cloud", {
                scrollTrigger: {
                    trigger: "#ww1",
                    start: "top center",
                    end: "bottom center",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 0.7,
                scale: 2,
                x: -100,
                y: -20,
                duration: 3
            });
            
            soldiers.forEach((soldier, i) => {
                gsap.to(soldier, {
                    scrollTrigger: {
                        trigger: "#ww1",
                        start: "top center",
                        end: "bottom center",
                        scrub: true,
                        scroller: scroller
                    },
                    y: i % 2 === 0 ? -15 : -30,
                    duration: 2,
                    ease: "power1.inOut"
                });
            });
            
            // Chemical structure animation for WW1
            const ww1Atoms = gsap.utils.toArray("#ww1 .atom");
            const ww1Bonds = gsap.utils.toArray("#ww1 .bond");
            
            gsap.fromTo(ww1Atoms.concat(ww1Bonds), {
                opacity: 0,
                scale: 0
            }, {
                scrollTrigger: {
                    trigger: "#ww1",
                    start: "center center",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                scale: 1,
                duration: 1,
                stagger: 0.1
            });
            
            // Lab Animation
            gsap.to([".flask", ".microscope", ".lab-equipment"], {
                scrollTrigger: {
                    trigger: "#research",
                    start: "top center",
                    end: "+=400",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                y: 0,
                duration: 1
            });
            
            gsap.to(".flask-liquid", {
                scrollTrigger: {
                    trigger: "#research",
                    start: "top center",
                    end: "+=500",
                    scrub: true,
                    scroller: scroller
                },
                scaleY: 1.5,
                duration: 2
            });
            
            // Bubbles in flask
            const bubbles = gsap.utils.toArray(".bubble");
            bubbles.forEach(bubble => {
                gsap.to(bubble, {
                    scrollTrigger: {
                        trigger: "#research",
                        start: "center center",
                        scrub: true,
                        scroller: scroller
                    },
                    opacity: 1,
                    y: -60,
                    duration: 3,
                    repeat: -1
                });
            });
            
            // Research chemical structure
            const researchAtoms = gsap.utils.toArray("#research .atom");
            const researchBonds = gsap.utils.toArray("#research .bond");
            
            gsap.fromTo(researchAtoms.concat(researchBonds), {
                opacity: 0,
                scale: 0
            }, {
                scrollTrigger: {
                    trigger: "#research",
                    start: "center center",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                scale: 1,
                duration: 1,
                stagger: 0.1
            });
            
            // DNA Animation
            const dnaBases = gsap.utils.toArray(".dna-base");
            const dnaConnectors = gsap.utils.toArray(".dna-connector");
            
            gsap.to(dnaBases, {
                scrollTrigger: {
                    trigger: "#mechanism",
                    start: "top center",
                    end: "+=400",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                scale: 1,
                duration: 1,
                stagger: 0.2
            });
            
            gsap.to(dnaConnectors, {
                scrollTrigger: {
                    trigger: "#mechanism",
                    start: "top center",
                    end: "+=400",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                duration: 1,
                stagger: 0.2
            });
            
            gsap.to(".aziridinium", {
                scrollTrigger: {
                    trigger: "#mechanism",
                    start: "top center",
                    end: "+=300",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                y: 40,
                duration: 1
            });
            
            gsap.to(".crosslink", {
                scrollTrigger: {
                    trigger: "#mechanism",
                    start: "center center",
                    end: "+=500",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                scale: 2.5,
                duration: 2
            });
            
            // Mechanism chemical structure
            const mechanismAtoms = gsap.utils.toArray("#mechanism .atom");
            const mechanismBonds = gsap.utils.toArray("#mechanism .bond");
            
            gsap.fromTo(mechanismAtoms.concat(mechanismBonds), {
                opacity: 0,
                scale: 0
            }, {
                scrollTrigger: {
                    trigger: "#mechanism",
                    start: "center center",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                scale: 1,
                duration: 1,
                stagger: 0.1
            });
            
            // Drug Cards Animation
            const drugCards = gsap.utils.toArray(".drug-card");
            gsap.to(drugCards, {
                scrollTrigger: {
                    trigger: "#drugs",
                    start: "top center",
                    end: "+=500",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                y: 0,
                duration: 1,
                stagger: 0.2
            });
            
            // Drugs chemical structure
            const drugAtoms = gsap.utils.toArray("#drugs .atom");
            const drugBonds = gsap.utils.toArray("#drugs .bond");
            
            gsap.fromTo(drugAtoms.concat(drugBonds), {
                opacity: 0,
                scale: 0
            }, {
                scrollTrigger: {
                    trigger: "#drugs",
                    start: "center center",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                scale: 1,
                duration: 1,
                stagger: 0.1
            });
            
            // Treatment Animation
            gsap.to([".patient", ".iv-bag"], {
                scrollTrigger: {
                    trigger: "#treatment",
                    start: "top center",
                    end: "+=400",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                x: 0,
                duration: 1
            });
            
            gsap.to(".iv-tube", {
                scrollTrigger: {
                    trigger: "#treatment",
                    start: "top center",
                    end: "+=500",
                    scrub: true,
                    scroller: scroller
                },
                opacity: 1,
                scaleY: 1,
                duration: 1.5
            });
            
            // Cancer cells appearing and disappearing
            const cancerCells = gsap.utils.toArray(".cancer-cell");
            cancerCells.forEach((cell, i) => {
                gsap.to(cell, {
                    scrollTrigger: {
                        trigger: "#treatment",
                        start: "top center",
                        end: "+=600",
                        scrub: true,
                        scroller: scroller
                    },
                    opacity: 1,
                    scale: 1,
                    duration: 0.5,
                    delay: i * 0.2
                });
                
                gsap.to(cell, {
                    scrollTrigger: {
                        trigger: "#treatment",
                        start: "center center",
                        end: "+=800",
                        scrub: true,
                        scroller: scroller
                    },
                    opacity: 0,
                    scale: 0,
                    duration: 1,
                    delay: i * 0.2 + 0.5
                });
            });
            
            // Additional effects
            gsap.to(".flask", {
                scrollTrigger: {
                    trigger: "#research",
                    start: "center center",
                    scrub: true,
                    scroller: scroller
                },
                y: -15,
                duration: 0.7,
                yoyo: true,
                repeat: 1
            });
            
            gsap.to(dnaBases, {
                scrollTrigger: {
                    trigger: "#mechanism",
                    start: "center center",
                    scrub: true,
                    scroller: scroller
                },
                y: 8,
                duration: 0.4,
                stagger: 0.1,
                yoyo: true,
                repeat: 1
            });
            
            // Tooltip functionality
            document.querySelectorAll('.atom, .dna-base').forEach(element => {
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                tooltip.textContent = element.textContent;
                document.body.appendChild(tooltip);
                
                element.addEventListener('mouseenter', (e) => {
                    const rect = element.getBoundingClientRect();
                    tooltip.style.left = `${rect.left + rect.width/2 - tooltip.offsetWidth/2}px`;
                    tooltip.style.top = `${rect.top - 25}px`;
                    tooltip.style.opacity = '1';
                });
                
                element.addEventListener('mouseleave', () => {
                    tooltip.style.opacity = '0';
                });
            });
        }
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            const scroller = setupForWix();
            setupAnimations(scroller);
            
            // Refresh ScrollTrigger after a short delay to account for Wix's dynamic loading
            setTimeout(() => {
                ScrollTrigger.refresh();
            }, 1000);
        });
        
        // Also refresh when window loads
        window.addEventListener('load', () => {
            ScrollTrigger.refresh();
        });
    </script>
</body>
</html>
